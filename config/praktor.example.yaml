telegram:
  token: "${PRAKTOR_TELEGRAM_TOKEN}"
  allow_from: []                    # Empty = allow all; list of Telegram user IDs
  main_chat_id: 0                   # Chat ID for scheduled task results

defaults:
  image: "praktor-agent:latest"
  model: "claude-sonnet-4-6"           # Default Claude model for agents
  max_running: 5
  idle_timeout: 10m
  anthropic_api_key: "${ANTHROPIC_API_KEY}"
  oauth_token: "${CLAUDE_CODE_OAUTH_TOKEN}"

agents:
  general:
    description: "General-purpose assistant for everyday tasks"
    workspace: general
  coder:
    description: "Software engineering specialist"
    model: "claude-opus-4-6"
    workspace: coder
    nix_enabled: true                              # Enable nix package manager
    env:
      EDITOR: vim                            # Regular env var
      GITHUB_TOKEN: "secret:github-token"    # Resolved from vault at container start
    files:
      - secret: gcp-service-account          # Secret name in vault
        target: /etc/gcp/sa.json             # Path inside container
        mode: "0600"                         # File permissions (default: 0600)
  researcher:
    description: "Web research and analysis"
    workspace: researcher
    allowed_tools: [WebSearch, WebFetch, Read, Write]

router:
  default_agent: general

web:
  enabled: true
  port: 8080
  auth: "${PRAKTOR_WEB_PASSWORD}"    # Basic auth for dashboard

vault:
  passphrase: "${PRAKTOR_VAULT_PASSPHRASE}"

scheduler:
  poll_interval: 30s
